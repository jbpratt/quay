---
allowed-tools: Bash(jira:*)
argument-hint: [optional issue type]
description: Create a JIRA issue in PROJQUAY with smart component detection
---

# Create a JIRA Issue

Follow these steps to create a well-formatted JIRA issue:

1. **Determine issue type**:
   - If $ARGUMENTS is provided, use it as the issue type
   - Otherwise, ask the user for the issue type: Bug, Story, Task, Epic, or Sub-task

2. **Gather required information**:
   - **Summary**: Short, clear title (ask user)
   - **Description**: Detailed description of the issue (ask user)
   - **Priority** (optional): High, Medium, Low (ask user, default: Medium)
   - **Assignee** (optional): Username or email (ask user if they want to assign)
   - **Labels** (optional): Comma-separated tags (ask user)
   - **Fix Version** (optional): Target release version (ask user)

3. **Smart component detection**:
   - Analyze the summary and description for keywords: ui, web, frontend, react, patternfly, interface, component, page, view, form, button, modal, table
   - If UI/web-related keywords detected â†’ set component to "ui"
   - Otherwise, ask user if they want to specify a component (api, data, auth, endpoints, workers, buildman, storage, web)

4. **Add Claude Code attribution**:
   - Append to the description: "\n\n---\nGenerated by Claude Code"

5. **Create the issue** using heredoc for multi-line description:
   ```bash
   jira issue create \
     --type "<type>" \
     --summary "<summary>" \
     --body "$(cat <<'EOF'
   <description>

   ---
   Generated by Claude Code
   EOF
   )" \
     --priority "<priority>" \
     ${component:+--component "$component"} \
     ${assignee:+--assignee "$assignee"} \
     ${labels:+--label "$labels"} \
     ${fix_version:+--fix-version "$fix_version"}
   ```

6. **Display result**:
   - Show the created issue key (PROJQUAY-####)
   - Mention the user can view it with: `jira issue view PROJQUAY-####`
   - If --web flag is supported, offer to open in browser

**Example usage**:
- `/create-issue` - Interactive issue creation
- `/create-issue Bug` - Create a bug with prompts
- `/create-issue Story` - Create a story with prompts
